var slotGame,sg,comp=AdobeAn.getComposition("99A42755F528A84A849CDFE1956DCDBB"),lib=lib||{},lib=comp.getLibrary(),initGame=function(){(sg=new SlotGame(stage)).setView(),sg.initView(),createjs.Ticker.addEventListener("tick",sg.EnterFrame)},SlotGame=function(e){this.stage=e,SlotGame.slotgame=this};SlotGame.prototype.initView=()=>{sg.trace("initView()");for(var e=sg.reel_cols_min;e<sg.reel_cols_num;e++)for(var t=0;t<sg.reel_rows_num;t++){var s=sg.stage.getChildByName("reelName"+e);s.gotoAndStop(0),s["reel_"+t].gotoAndStop(t)}},SlotGame.prototype.spinReel=e=>{sg.game_start_flg?sg.speed_current<sg.speed_max?sg.speed_current+=sg.speed_step:sg.speed_current=sg.speed_max:sg.speed_current>sg.speed_min?(sg.speed_current-=sg.speed_step,sg.speed_min_flg=!1):(sg.speed_current=sg.speed_min,sg.speed_min_flg=!0);var t,s,o=sg.stage.getChildByName("reelName"+e);if(o.y+=sg.speed_current,!1===sg.game_start_flg&&sg.speed_min_flg&&o[sg.reel_center].currentFrame===sg.pic_stop[e]&&sg.checkReelLeft(e))return sg.reel_wheel_flg[e]=!1,void(sg.reel_stop_flg[e]=!0);if(o.y>=sg.reel_end_y){o.y=sg.reel_start_y;for(var l=sg.reel_cols_min;l<sg.reel_cols_num;l++)(t=o["reel_"+l].currentFrame)===sg.pic_all-1?(s=0,sg.pic_current=0):(s=t+1,sg.pic_current++),o["reel_"+l].gotoAndStop(s)}},SlotGame.prototype.checkReelLeft=e=>!sg.reel_wheel_flg[e-1],SlotGame.prototype.startGame=()=>{if(sg.trace("startGame()"),sg.btn_count++,2<sg.btn_count)sg.trace("wait reel stop");else{sg.game_start_flg?(sg.trace("stop reel spin"),sg.game_start_flg=!1):(sg.trace("start reel spin"),sg.game_start_flg=!0,sg.speed_current=sg.speed_default,sg.bingoTitle.alpha=0,sg.bingoAnim.gotoAndStop(0),sg.bingo_flg=!1,sg.score-=sg.score_bet,sg.setScore(sg.score,sg.tf),sg.initResult());for(var e=sg.reel_cols_min;e<sg.reel_cols_num;e++)sg.reel_wheel_flg[e]=!0,sg.reel_stop_flg[e]=!1}},SlotGame.prototype.initResult=()=>{if(sg.trace("initResult()"),1===Math.floor(Math.random()*sg.odds)+1){sg.trace("HIT!"),sg.bingo_flg=!0;for(var e=Math.floor(Math.random()*sg.pic_all),t=0;t<sg.pic_all;t++)sg.pic_stop[t]=e;sg.result_flg=!0,sg.auto_flg&&sg.sleep(sg.sleep_time_stop,()=>{sg.startGame()})}else sg.trace("OFF!"),sg.setStopPicMiss()},SlotGame.prototype.setStopPicMiss=()=>{sg.trace("setStopPicMiss()");for(var e=0;e<sg.pic_all;e++)sg.pic_stop[e]=Math.floor(Math.random()*sg.pic_all);for(var t=1,e=0;e<sg.pic_all;e++){if(sg.pic_stop[e]!==sg.pic_stop[e+1]){sg.result_flg=!0,sg.auto_flg&&sg.sleep(sg.sleep_time_stop,()=>{sg.startGame()});break}sg.trace(e+" and, "+[e+1]+" picture is same"),++t===sg.reel_cols_num&&(sg.trace("OFF, but all picture is same, re-set"),sg.setStopPicMiss())}},SlotGame.prototype.stopReel=e=>{sg.trace("stopReel(): "+e),sg.reel_stop_flg[e]=!1,sg.stage.getChildByName("reelName"+e).y=sg.reel_start_y,sg.reel_stop_count++,sg.reel_stop_count===sg.reel_cols_num&&sg.endGame()},SlotGame.prototype.endGame=()=>{sg.trace("endGame()"),sg.btn_count=0,sg.reel_stop_count=0,sg.result_flg=!1,sg.bingo_flg?(sg.trace("HIT Directing"),sg.score+=sg.score_bingo*sg.score_bet,sg.bingoTitle.alpha=1,sg.bingoAnim.gotoAndPlay("start")):(sg.trace("OFF Directing"),sg.score<=0&&(sg.score=0,sg.finishGame())),sg.setScore(sg.score,sg.tf),0<sg.score&&sg.auto_flg&&sg.sleep(sg.sleep_time_restart,()=>{sg.startGame()})},SlotGame.prototype.sleep=(e,t)=>{var s=0,o=()=>{e<=++s?t&&t():(clearTimeout(l),l=setTimeout(o,1e3))},l=setTimeout(o,1e3)},SlotGame.prototype.finishGame=()=>{sg.trace("finishGame()"),sg.startPic.gotoAndPlay("off"),sg.startButton.removeEventListener("click",sg.clickStart),sg.startButton.removeEventListener("mouseover",sg.overStart),sg.startButton.removeEventListener("mouseout",sg.outStartBtn),sg.startButton.visible=!1,sg.autoPic.gotoAndPlay("off"),sg.autoButton.removeEventListener("click",sg.clickAutoBtn),sg.autoButton.visible=!1,sg.is_global_flg&&(sg.soundPic.gotoAndPlay("off"),sg.soundButton.removeEventListener("click",sg.clickSoundBtn),sg.soundButton.visible=!1)},SlotGame.prototype.EnterFrame=()=>{for(var e=sg.reel_cols_min;e<sg.reel_cols_num;e++)sg.reel_wheel_flg[e]&&sg.result_flg&&sg.spinReel(e),sg.reel_stop_flg[e]&&sg.stopReel(e)},SlotGame.prototype.setScore=(e,t)=>{t.text="Total Win："+e,stage.addChild(t)},SlotGame.prototype.setReel=(e,t)=>(e.x=t*(sg.reel_width+sg.reel_offset)+sg.reel_offset+sg.center_offset,e.y=sg.reel_start_y,e.name="reelName"+t,stage.addChild(e),e),SlotGame.prototype.playSound=()=>{sg.sound_flg&&(createjs.Sound.registerSound("./sounds/sound_push.mp3","push"),createjs.Sound.play("push"))},SlotGame.prototype.trace=e=>{sg.clog_flg&&console.log(e)},SlotGame.prototype.setView=()=>{sg.trace("setView");var e=new lib.mc_bg;e.x=e.y=0,stage.addChild(e),sg.reel_container=new lib.mc_square_black,sg.reel_container.x=87,sg.reel_container.y=-10,sg.reel_container.scaleX=58,sg.reel_container.scaleY=44,stage.addChild(sg.reel_container);for(var t=sg.reel_cols_min;t<sg.reel_cols_num;t++)sg.mc_reel[t]=sg.setReel(new lib.mc_reel_all,t);e=new lib.mc_square_black;e.x=98,e.y=-10,e.scaleX=56,e.scaleY=10,e.alpha=1,stage.addChild(e);e=new lib.mc_logo;e.x=263,e.y=20,e.scaleX=e.scaleY=.5,e.alpha=1,stage.addChild(e);e=new lib.mc_fade;e.x=100,e.y=100,e.scaleX=28,e.scaleY=-1,e.alpha=1,stage.addChild(e);e=new lib.mc_square_black;e.x=98,e.y=330,e.scaleX=56,e.scaleY=9,e.alpha=1,stage.addChild(e);e=new lib.mc_fade;e.x=100,e.y=320,e.scaleX=28,e.scaleY=1,e.alpha=1,stage.addChild(e);e=new lib.mc_square_gray;e.x=108,e.y=340,e.scaleX=54,e.scaleY=7,e.alpha=.5,stage.addChild(e);e=new lib.mc_square_gray;e.x=118,e.y=350,e.scaleX=52,e.scaleY=5,e.alpha=.5,stage.addChild(e);e=new lib.mc_triangle;e.x=107,e.y=202,e.scaleX=.1,e.scaleY=.1,e.rotation=90,e.alpha=1,stage.addChild(e);e=new lib.mc_triangle;e.x=653,e.y=212,e.scaleX=.1,e.scaleY=.1,e.rotation=270,e.alpha=1,stage.addChild(e),sg.bingoTitle=new lib.mc_bingo,sg.bingoTitle.x=109,sg.bingoTitle.y=167,sg.bingoTitle.scaleX=1,sg.bingoTitle.scaleY=1,sg.bingoTitle.alpha=0,stage.addChild(sg.bingoTitle),sg.bingoAnim=new lib.mc_paper,sg.bingoAnim.x=70,sg.bingoAnim.y=90,sg.bingoAnim.scaleX=sg.bingoAnim.scaleY=1.25,sg.bingoAnim.alpha=1,sg.bingoAnim.gotoAndStop(0),stage.addChild(sg.bingoAnim),stage.enableMouseOver(),sg.startPic=new lib.mc_bt_start,sg.startPic.x=560,sg.startPic.y=345,stage.addChild(sg.startPic),sg.startButton=new lib.mc_hit_area,sg.startButton.cursor="pointer",sg.startButton.x=558,sg.startButton.y=345,sg.startButton.scaleX=.46,sg.startButton.scaleY=1.25,sg.startButton.alpha=.01,stage.addChild(sg.startButton),sg.startButton.addEventListener("click",sg.clickStartBtn),sg.startButton.addEventListener("mouseover",sg.overStartBtn),sg.startButton.addEventListener("mouseout",sg.outStartBtn),sg.autoPic=new lib.mc_bt_auto,sg.autoPic.x=470,sg.autoPic.y=362,sg.autoPic.gotoAndPlay("off"),stage.addChild(sg.autoPic),sg.autoButton=new lib.mc_hit_area,sg.autoButton.cursor="pointer",sg.autoButton.x=470,sg.autoButton.y=362,sg.autoButton.scaleX=.5,sg.autoButton.scaleY=.5,sg.autoButton.alpha=.01,sg.autoButton.addEventListener("click",sg.clickAutoBtn),stage.addChild(sg.autoButton),sg.is_global_flg&&(sg.soundPic=new lib.mc_bt_sound,sg.soundPic.x=435,sg.soundPic.y=365,sg.soundPic.gotoAndPlay("off"),stage.addChild(sg.soundPic),sg.soundButton=new lib.mc_hit_area,sg.soundButton.cursor="pointer",sg.soundButton.x=431,sg.soundButton.y=361,sg.soundButton.scaleX=.175,sg.soundButton.scaleY=.5,sg.soundButton.alpha=.01,sg.soundButton.addEventListener("click",sg.clickSoundBtn),stage.addChild(sg.soundButton)),sg.tf=new createjs.Text("Total Win：","24px sans-serif","White"),sg.tf.x=130,sg.tf.y=358,sg.score=sg.score_start,sg.setScore(sg.score,sg.tf)},SlotGame.prototype.clickStartBtn=e=>{sg.startGame(),sg.startPic.gotoAndPlay("on"),sg.playSound()},SlotGame.prototype.overStartBtn=e=>{sg.startPic.gotoAndPlay("over")},SlotGame.prototype.outStartBtn=e=>{sg.startPic.gotoAndPlay("normal")},SlotGame.prototype.clickAutoBtn=e=>{sg.auto_flg?(sg.auto_flg=!1,sg.autoPic.gotoAndPlay("off")):(sg.auto_flg=!0,sg.autoPic.gotoAndPlay("on"))},SlotGame.prototype.clickSoundBtn=e=>{sg.sound_flg?(sg.sound_flg=!1,sg.soundPic.gotoAndPlay("off")):(sg.sound_flg=!0,sg.soundPic.gotoAndPlay("on"))},SlotGame.prototype.reel_offset=10,SlotGame.prototype.reel_width=100,SlotGame.prototype.center_offset=100,SlotGame.prototype.game_start_flg=!1,SlotGame.prototype.btn_count=0,SlotGame.prototype.reel_stop_count=0,SlotGame.prototype.reel_cols_num=5,SlotGame.prototype.reel_cols_min=0,SlotGame.prototype.reel_rows_num=5,SlotGame.prototype.reel_wheel_flg=[],SlotGame.prototype.reel_stop_flg=[],SlotGame.prototype.reel_start_y=0,SlotGame.prototype.reel_end_y=83,SlotGame.prototype.speed_max=40,SlotGame.prototype.speed_min=20,SlotGame.prototype.speed_step=9,SlotGame.prototype.speed_default=30,SlotGame.prototype.speed_current=null,SlotGame.prototype.speed_min_flg=!1,SlotGame.prototype.pic_current=0,SlotGame.prototype.pic_stop=[],SlotGame.prototype.pic_all=10,SlotGame.prototype.score=null,SlotGame.prototype.score_start=1e3,SlotGame.prototype.score_bingo=100,SlotGame.prototype.score_bet=10,SlotGame.prototype.score_text_field=null,SlotGame.prototype.bingo_flg=!1,SlotGame.prototype.odds=5,SlotGame.prototype.result_flg=!1,SlotGame.prototype.reel_container=null,SlotGame.prototype.mc_reel=[],SlotGame.prototype.reel_center="reel_2",SlotGame.prototype.auto_flg=!1,SlotGame.prototype.sleep_time_stop=1,SlotGame.prototype.sleep_time_restart=2,SlotGame.prototype.sound_flg=!1,SlotGame.prototype.clog_flg=!1,SlotGame.prototype.is_global_flg=!0,SlotGame.prototype.bingoTitle=null,SlotGame.prototype.bingoAnim=null,SlotGame.prototype.startButton=null,SlotGame.prototype.startButtonDummy=null,SlotGame.prototype.autoButton=null,SlotGame.prototype.soundButton=null;